
/*

ic 4514

 */  

 

int a0 = 2;
int a1 = 3;
int a2 = 4;
int a3 = 5;
int output = 7;
int bin[4];
long previousMillis;

byte columnStates[100][16] = { {0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{1,1,0,0,0,0,0,0,0,1,0,0,0,0,0,0},{1,1,0,0,0,0,1,0,0,1,0,0,0,0,0,0},{1,1,0,0,0,1,1,1,0,1,0,0,0,0,0,0},{1,1,0,0,0,1,1,1,0,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,1,0,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{0,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,0,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{0,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,0,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,0,1,1,0,0,0,0,0,0},{1,1,0,0,1,1,1,0,1,1,0,0,0,0,0,0},{1,1,0,0,0,1,1,0,1,1,0,0,0,0,0,0},{1,1,0,0,0,1,1,0,1,1,0,0,0,0,0,0},{1,1,0,0,0,0,1,0,1,1,0,0,0,0,0,0},{1,1,0,0,0,0,0,0,1,1,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{0,0,0,0,1,1,0,0,0,0,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0},{1,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0}
                            };


void setup(){
  
  pinMode(a0, OUTPUT);    
  pinMode(a1, OUTPUT);    
  pinMode(a2, OUTPUT); 
  pinMode(a3, OUTPUT);   
  pinMode(output, OUTPUT);    // common pin 
  
  Serial.begin(9600);
  
}

 

void loop () {
 
  for (int n = 0; n <= 1; n++){ //first bracket number of columnStates
    myDelay(1000, n); //parameter is number of milliseconds to keep column on
  }
}

void myDelay(unsigned long duration, unsigned long columnNum ){
  unsigned long start = millis();
  while (millis() - start <= duration){
    for (int adrs = 0; adrs <= 15; adrs++){  
      byte tstate = columnStates[columnNum][adrs];  
      lightLED(adrs, tstate); //pass the led number and the corresponding state it should be 
      
      Serial.print(tstate);
    }
  }
  for (int adrs = 0; adrs <= 15; adrs++){  
      lightLED(adrs, 1); //turn all lights off in between frames - 1 is LOW
  }
  delay(1000);
  
}


void lightLED(int dec, byte state){

    decToBin(dec);
    byte w = bin[0];
    byte x = bin[1];
    byte y = bin[2];
    byte z = bin[3];
    
    digitalWrite(a0,z);
    digitalWrite(a1,y);
    digitalWrite(a2,x);
    digitalWrite(a3,w);

    digitalWrite(output, state); //send 0 to make the selected pin HIGH
    
    bin[0] = 0;
    bin[1] = 0;
    bin[2] = 0; 
    bin[3] = 0; 
}


void decToBin( byte dec ){
  
  if (dec == 0){
    bin[0] = 0;
    bin[1] = 0;
    bin[2] = 0;
    bin[3] = 0;
  } else if (dec == 1){
    bin[0] = 0;
    bin[1] = 0;
    bin[2] = 0;
    bin[3] = 1;
  } else if (dec == 2){
    bin[0] = 0;
    bin[1] = 0;
    bin[2] = 1;
    bin[3] = 0;
  } else if (dec == 3){
    bin[0] = 0;
    bin[1] = 0;
    bin[2] = 1;
    bin[3] = 1;
  } else if (dec == 4){
    bin[0] = 0;
    bin[1] = 1;
    bin[2] = 0;
    bin[3] = 0;
  } else if (dec == 5){
    bin[0] = 0;
    bin[1] = 1;
    bin[2] = 0;
    bin[3] = 1;
  } else if (dec == 6){
    bin[0] = 0;
    bin[1] = 1;
    bin[2] = 1;
    bin[3] = 0;
  } else if (dec == 7){
    bin[0] = 0;
    bin[1] = 1;
    bin[2] = 1;
    bin[3] = 1;
  } else if (dec == 8){
    bin[0] = 1;
    bin[1] = 0;
    bin[2] = 0;
    bin[3] = 0;
  } else if (dec == 9){
    bin[0] = 1;
    bin[1] = 0;
    bin[2] = 0;
    bin[3] = 1;
  } else if (dec == 10){
    bin[0] = 1;
    bin[1] = 0;
    bin[2] = 1;
    bin[3] = 0;
  } else if (dec == 11){
    bin[0] = 1;
    bin[1] = 0;
    bin[2] = 1;
    bin[3] = 1;
  } else if (dec == 12){
    bin[0] = 1;
    bin[1] = 1;
    bin[2] = 0;
    bin[3] = 0;
  } else if (dec == 13){
    bin[0] = 1;
    bin[1] = 1;
    bin[2] = 0;
    bin[3] = 1;
  } else if (dec == 14){
    bin[0] = 1;
    bin[1] = 1;
    bin[2] = 1;
    bin[3] = 0;
  } else if (dec == 15){
    bin[0] = 1;
    bin[1] = 1;
    bin[2] = 1;
    bin[3] = 1;
  } 
}

